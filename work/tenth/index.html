<!doctype html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <title>jQuery</title>
    <link rel="stylesheet" href="../../common/css/reset.css">
    <link rel="stylesheet" href="../../common/css/base.css">
    <link rel="stylesheet" href="./css/style.css">
  </head>
  <body>
    <div class="wrap">
      <div class="container">
        <div class="header">
          <p class="header__title">Search Books!</p>
        </div>
        <div class="search">
          <div class="search__text">
            <input type="text" id="js-search-word" class="search__text__input" placeholder="検索する">
          </div>
          <button id="js-search-button" class="search__btn">検索する</button>
        </div>
        <ul class="lists"></ul>
      </div>
    </div>
    <script src="../../common/js/jquery.js"></script>
    <script>
// ーーーーーーーーーーーーーーーーーーjQueryーーーーーーーーーーーーーーーーーーーーーーーーー
$(function research() {
　$('#js-search-button').on('click', function(){
  var keyword = $('#js-search-word').val();
  // 検索を押すことでjs-search-wordの中のバリューをkeywordいれる
  // 検索の値がバリューに入る
  var pages = 1;
  $.ajax({
  url: 'https://app.rakuten.co.jp/services/api/BooksTotal/Search/20130522',
  type: 'GET',
  datatype: 'json',//書き方のルール
  data: {
  applicationId: '1019399324990976605',
  booksGenreId: '001',//楽天ブックスジャンルID
  keyword: keyword,// キーワード
  hits: '20',// 1ページあたりの取得件数
  field: '0',// 検索フィールド
  page:pages // page:2だと2ページから表示される
  },
  }).done(function(data) {
  // ajaxで情報を.done(function(data)のdataに渡す。
  if(data.Items === 0) {
    massage ('検索結果が見つかりませんでした。別のキーワードで検索して下さい。')
  } else {
    $(data.Items).each(function(indax,value) {
var list = '<li class="lists__item">' +
  '<div class="lists__item__inner">' +
    '<a href='+value.Item.itemUrl+' class="lists__item__link" target="_blank">' +
      '<img src='+value.Item.largeImageUrl+' class="lists__item__img" alt="">'+
      '<p class="lists__item__detail">作品名：'+value.Item.title+'</p>'+
      '<p class="lists__item__detail">作者：'+value.Item.author+'</p>'+
      '<p class="lists__item__detail">出版社：'+value.Item.publisherName+'</p>'+
    '</a>'+
  '</div>'+
'</li>';
$('ul').before(list);//指定した要素のなか（DOMの中の前）に文字列を指定できる。検索したときにulの下にlistが表示される。
});
}
// ーーーーーーーーーーーーーーーーーーーーページャーーーーーーーーーーーーーーーーーーーーーーーーー
$('ul').after('<div class="js-pager">'+
  '<ul class="btn-wrapper">'+
    '<li class="prev btn-item">'+'<a class="btn-anchor">前へ</a></li>'+
    '<li class="next btn-item">'+'<a class="btn-anchor">次へ</a></li>'+
    '</ul>'+
    '</div>');
    　$(document).on('click','ul.prev',function() {
      prev--;
      research();
      
  　});
  　$(document).on('click','ul.next',function() {
    prev++;
    research();

  });
  console.log(pages);
});
});
});
    </script>
  </body>
</html>
 <!-- // 楽天ブックスの総合検索APIを使って製作してください。
// // answerの挙動を良く見てね！
// //
// // 下記URLにAPIの仕様が載ってるいので、ブラウザで開いて参考にしてください。
// // https://webservice.rakuten.co.jp/api/bookstotalsearch/
// //
// //
// // [使うメソッド]
// // $.each(配列, function functionName() {}) 配列に対しての繰り返し処理
// // $.ajax({}) 外部ファイルやURLに対してデータをリクエストすることができます。
// // 以下は今回使う$.ajaxの基本的な形です。
// //
// // $.ajax({
// //   url: 'https://app.rakuten.co.jp/services/api/BooksTotal/Search/20130522',
// //   type: 'GET',
// //   datatype: 'json',
// //   data: {
// //     // 「区分:サービス固有パラメーター」を確認して、必要な情報をdata内に入れましょう。
// //     applicationId: '1019399324990976605', // (今回はこのIDを使用してください) ※IDは他サイト等には絶対に転載しないでください
// //     booksGenreId: '001'
// //   },
// // }).done(function(data) {
// //   // この中にデータ取得後の動きを記述していきます。
// //   console.log(data);
// // });
// //
// //
// // $.ajaxによってデータが取得できたら、必要なデータ(作品名とか作者名とか)を取得します。
// // 取得できたらHTMLに<ul class='lists'></ul>を用意しているので、下のテンプレに沿ってデータを入れ込みましょう。
// // <li class='lists__item'>
// //  <div class='lists__item__inner'>
// //    <a href='' class='lists__item__link' target='_blank'>
// //      <img src='' class='lists__item__img' alt=''>
// //      <p class='lists__item__detail'>作品名：</p>
// //      <p class='lists__item__detail'>作者　：</p>
// //      <p class='lists__item__detail'>出版社：</p>
// //    </a>
// //  </div>
// // </li>
// //
// // 取得できた書籍の件数をもとに、ページャを作成しましょう
// // ページャの条件
// // ├ 「前へ」と「次へ」のボタンがある
// // ├ 1ページ目では「前へ」に、最後のページでは「次へ」にdisabledクラスをつけて非活性（使用不能）にする
// // └ 1ページしかない場合はどちらもdisabledクラスをつけて非活性にする
// //
// // ページャのテンプレート
// // <div class="js-pager">
// //   <ul class="btn-wrapper">
// //     <li class="prev btn-item"><a class="btn-anchor" href="">前へ</a></li>
// //     <li class="next btn-item"><a class="btn-anchor" href="">次へ</a></li>
// //   </ul>
// // </div> -->